(function(t){function e(e){for(var n,o,r=e[0],i=e[1],u=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);l&&l(e);while(p.length)p.shift()();return c.push.apply(c,u||[]),a()}function a(){for(var t,e=0;e<c.length;e++){for(var a=c[e],n=!0,r=1;r<a.length;r++){var i=a[r];0!==s[i]&&(n=!1)}n&&(c.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},s={app:0},c=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/vue-chat/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=i;c.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"1fa9":function(t,e,a){"use strict";a("9756")},"3a1c":function(t,e,a){"use strict";a("e7e1")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app"},[a("app-contacts",{attrs:{"is-load-error":t.isLoadContactsError,contacts:t.contacts,"checked-contact-name":t.checkedContact?t.checkedContact.name:""},on:{"set-contact":t.setCheckedContact}}),a("app-chat",{attrs:{"checked-contact":t.checkedContact},on:{"send-message":t.pushMessage}})],1)},c=[],o=a("1da1"),r=(a("d3b7"),a("d81d"),a("b0c0"),a("cb29"),a("96cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-contacts"},[a("h3",{staticClass:"title"},[t._v(" Контакты ")]),t.isLoadError?a("div",{staticClass:"load-error"},[t._v(" Ошибка загрузки контактов "),a("button",{staticClass:"reload-contacts"},[t._v(" повторить ")])]):a("ul",{staticClass:"contacts-list"},t._l(t.contacts,(function(e){return a("li",{key:e.id,class:["contacts-item",e.name===t.checkedContactName&&"_checked",e.isOnline&&"_online"],on:{click:function(a){return t.setContact(e)}}},[a("img",{staticClass:"avatar",attrs:{src:e.avatar,alt:e.name}}),a("div",{staticClass:"contact-data"},[a("div",{staticClass:"name"},[t._v(" "+t._s(e.name)+" ")]),a("div",{staticClass:"last-message"},[t._v(" "+t._s(e.messages.length?e.messages.at(-1).value:"Нет сообщений")+" ")])])])})),0)])}),i=[],u={name:"AppContacts",props:{isLoadError:{type:Boolean,default:!1},contacts:{type:Array,default:function(){return[]}},checkedContactName:{type:String,default:""}},methods:{setContact:function(t){this.$emit("set-contact",t)}}},l=u,d=(a("8c2e"),a("2877")),p=Object(d["a"])(l,r,i,!1,null,"6f9d68d8",null),m=p.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-chat"},[t.checkedContact?a("section",{staticClass:"head"},[a("img",{staticClass:"avatar",attrs:{src:t.checkedContact.avatar,alt:t.checkedContact.name}}),a("div",{staticClass:"contact-data"},[a("div",{staticClass:"name"},[t._v(" "+t._s(t.checkedContact.name)+" ")]),a("div",{staticClass:"status"},[t._v(" "+t._s(t.getContactStatus)+" ")])])]):t._e(),a("section",{staticClass:"body"},[t.getIsListVisible?a("ul",{staticClass:"messages"},t._l(t.checkedContact.messages,(function(e,n){return a("li",{key:n,class:["message",!e.inbox&&"_sent"]},[t._v(" "+t._s(e.value)+" "),a("span",{staticClass:"time"},[t._v(" "+t._s(e.time)+" ")])])})),0):a("div",{staticClass:"not-checked"},[t._v(" "+t._s(t.getEmptyMessage)+" ")])]),t.checkedContact?a("section",{staticClass:"footer"},[a("form",{staticClass:"chat-form",on:{submit:function(e){return e.preventDefault(),t.sendMessage.apply(null,arguments)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{type:"text",placeholder:"Введите сообщение"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),a("button",{staticClass:"button"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[a("path",{attrs:{d:"M6.48 6.794l.49 1.963a1 1 0 0 1-1.94.486l-1-4a1 1 0 0 1 1.393-1.15l15 7a1 1 0 0 1 0 1.813l-15 7a1 1 0 0 1-1.385-1.18l2-7A1 1 0 0 1 7 11h4a1 1 0 0 1 0 2H7.754l-1.19 4.167L17.635 12 6.48 6.794z",fill:"#000","fill-rule":"nonzero"}})])])])]):t._e()])},f=[],v={name:"AppChat",props:{checkedContact:{type:Object,default:null}},data:function(){return{message:"",isContactTyping:!1}},computed:{getIsListVisible:function(){var t,e;return null===(t=this.checkedContact)||void 0===t||null===(e=t.messages)||void 0===e?void 0:e.length},getEmptyMessage:function(){return!this.checkedContact||this.checkedContact.messages&&this.checkedContact.messages.length?"⇽ Выберите, кому хотите написать":"Отправьте первое сообщение"},getContactStatus:function(){return this.isContactTyping?"Печатает...":this.checkedContact.isOnline?"Онлайн":"Был в сети недавно"}},methods:{sendMessage:function(){var t=this;if(this.message){var e=new Date;this.$emit("send-message",{value:this.message,time:e.toLocaleTimeString()}),this.message="",this.checkedContact.isOnline&&setTimeout((function(){t.isContactTyping=!0,setTimeout((function(){e=new Date,t.$emit("send-message",{inbox:!0,time:e.toLocaleTimeString(),value:"Извини, отвечу позже :("}),t.isContactTyping=!1}),1500)}),700)}}}},g=v,C=(a("1fa9"),Object(d["a"])(g,h,f,!1,null,"201fba72",null)),b=C.exports,k=["Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quaerat, repellat?","Lorem ipsum dolor sit amet.","Lorem ipsum dolor sit amet, adipisicing.","Lorem ipsum dolor sit amet, consectetur necessitatibus tempora ut?","Lorem ipsum dolor sit g.","Lorem ipsum dolor sit amet.","Lorem ipsum dolor."],_={name:"App",components:{AppChat:b,AppContacts:m},data:function(){return{contacts:[],checkedContact:null,isLoadContactsError:!0}},created:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchContacts();case 2:case"end":return e.stop()}}),e)})))()},methods:{fetchContacts:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoadContactsError=!1,e.prev=1,e.next=4,fetch("https://jsonplaceholder.typicode.com/users");case 4:if(a=e.sent,!a.ok){e.next=12;break}return e.next=8,a.json();case 8:n=e.sent,t.contacts=n.map((function(t){var e=t.id,a=t.name,n=t.username;return{id:e,name:a,username:n,avatar:"https://placekitten.com/g/35/35",isOnline:Math.random()>=.5,messages:new Array(Math.floor(7*Math.random())).fill(void 0).map((function(){return{inbox:Math.random()>=.3,time:"Вчера",value:k[Math.floor(Math.random()*k.length)]}}))}})),e.next=13;break;case 12:t.isLoadContactsError=!0;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](1),t.isLoadContactsError=!0;case 18:case"end":return e.stop()}}),e,null,[[1,15]])})))()},setCheckedContact:function(t){this.checkedContact=t},pushMessage:function(t){this.checkedContact.messages.push(t)}}},y=_,w=(a("3a1c"),Object(d["a"])(y,s,c,!1,null,"dbbc3890",null)),x=w.exports;a("b751");n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(x)}}).$mount("#app")},"8c2e":function(t,e,a){"use strict";a("dc5d")},9756:function(t,e,a){},b751:function(t,e,a){},dc5d:function(t,e,a){},e7e1:function(t,e,a){}});
//# sourceMappingURL=app.aeef80b2.js.map